<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì†”ë­ ë‚´ê¸° ê´€ë¦¬ì</title>

<style>
body {
  background:#0b0b0b;
  color:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}
h2 { margin-top:30px; }
input, select, button {
  padding:6px;
  margin:4px;
}
.team-box {
  border:1px solid #333;
  padding:10px;
  margin-bottom:10px;
}
button {
  background:#222;
  color:#fff;
  border:1px solid #555;
  cursor:pointer;
}
button:hover { background:#333; }
</style>
</head>

<body>

<h1>ì†”ë­ ë‚´ê¸° ê´€ë¦¬ì íŒ¨ë„</h1>

<h2>íŒ€ ì´ë¦„ ì„¤ì •</h2>
<input id="redTeamName" placeholder="RED TEAM ì´ë¦„">
<input id="blueTeamName" placeholder="BLUE TEAM ì´ë¦„">
<button onclick="saveSettings()">íŒ€ ì´ë¦„ ì €ì¥</button>

<h2>í”Œë ˆì´ì–´ ì¶”ê°€</h2>
<div class="team-box">
  <input id="playerName" placeholder="ë‹‰ë„¤ì„">
  <select id="playerTeam">
    <option value="red">RED</option>
    <option value="blue">BLUE</option>
  </select>
  <button onclick="addPlayer()">ì¶”ê°€</button>
</div>

<h2>í˜„ì¬ ë“±ë¡ ëª©ë¡</h2>
<pre id="preview"></pre>

<button onclick="applyAll()">ğŸ”¥ ì ìš© (ì†¡ì¶œ ë°˜ì˜)</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://hsvknfmnsehwytnvaiwr.supabase.co";
const SUPABASE_KEY = "sb_publishable_l2wj1IeGSfcxgKVjJ28n0w_WK9iHm-j";
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

let tempPlayers = [];

async function loadSettings() {
  const { data } = await sb.from('settings').select('*').single();
  redTeamName.value = data.red_team_name;
  blueTeamName.value = data.blue_team_name;
}
loadSettings();

function addPlayer() {
  const name = playerName.value.trim();
  const team = playerTeam.value;
  if (!name) return;

  tempPlayers.push({
    name,
    team,
    wins: 0,
    losses: 0,
    streak: 0
  });

  playerName.value = '';
  renderPreview();
}

function renderPreview() {
  preview.textContent = JSON.stringify(tempPlayers, null, 2);
}

async function saveSettings() {
  await sb.from('settings')
    .update({
      red_team_name: redTeamName.value,
      blue_team_name: blueTeamName.value
    })
    .eq('id',1);

  alert('íŒ€ ì´ë¦„ ì €ì¥ ì™„ë£Œ');
}

async function applyAll() {
  // ğŸ”´ í•µì‹¬: ê¸°ì¡´ players ì „ë¶€ ì‚­ì œ
  await sb.from('players').delete().neq('id',0);

  // ìƒˆë¡œ ì‚½ì…
  if (tempPlayers.length > 0) {
    await sb.from('players').insert(tempPlayers);
  }

  alert('ì†¡ì¶œ íŒ¨ë„ ì ìš© ì™„ë£Œ');
}
</script>

</body>
</html>















