<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>솔랭 내기 관리자 패널</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; padding:20px; }
    input { margin:5px; padding:5px; }
    button { padding:5px 10px; margin:10px 0; }
  </style>
</head>
<body>

<h2>관리자 패널</h2>
<label>팀 인원 수: <input type="number" id="teamCount" value="5" min="1" max="10"></label>
<button onclick="applySettings()">적용</button>

<div id="playerInputs"></div>

<!-- Supabase 연결 -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const supabaseUrl = 'https://hsvknfmnsehwytnvaiwr.supabase.co';
  const supabaseKey = 'sb_publishable_l2wj1IeGSfcxgKVjJ28n0w_WK9iHm-j';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);
</script>

<!-- 관리자 JS -->
<script>
async function applySettings() {
  const teamCount = parseInt(document.getElementById('teamCount').value);
  const playerInputsDiv = document.getElementById('playerInputs');
  playerInputsDiv.innerHTML = '';

  for(let i=1; i<=teamCount; i++){
    const ourInput = document.createElement('input');
    ourInput.placeholder = `우리팀 플레이어 ${i} 닉네임`;
    ourInput.id = `our-${i}`;
    playerInputsDiv.appendChild(ourInput);

    const oppInput = document.createElement('input');
    oppInput.placeholder = `상대팀 플레이어 ${i} 닉네임`;
    oppInput.id = `opp-${i}`;
    playerInputsDiv.appendChild(oppInput);

    playerInputsDiv.appendChild(document.createElement('br'));
  }

  const players = [];
  for(let i=1;i<=teamCount;i++){
    const ourName = document.getElementById(`our-${i}`).value.trim();
    const oppName = document.getElementById(`opp-${i}`).value.trim();
    if(ourName) players.push({name: ourName, team: '우리팀', wins:0, losses:0, streak:0});
    if(oppName) players.push({name: oppName, team: '상대팀', wins:0, losses:0, streak:0});
  }

  if(players.length){
    const { data, error } = await supabase.from('players').upsert(players);
    if(error) console.log(error);
    else alert('적용 완료!');
  }
}
</script>

</body>
</html>



