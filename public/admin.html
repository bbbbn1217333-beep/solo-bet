<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>솔랭 내기 관리자</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
<style>
body {
  background:#111;
  color:#fff;
  font-family:'Orbitron', sans-serif;
  padding:20px;
}
h2 {
  text-align:center;
  color:#ff3333;
  text-shadow:0 0 10px #ff3333;
}
#controls {
  display:flex;
  gap:10px;
  justify-content:center;
  margin-bottom:20px;
}
input {
  padding:6px 10px;
  border-radius:6px;
  border:none;
}
button {
  padding:6px 14px;
  border-radius:6px;
  background:#ff3333;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
#playerInputs {
  display:flex;
  justify-content:center;
  gap:40px;
}
.team-column {
  display:flex;
  flex-direction:column;
  gap:6px;
}
.player-input {
  display:flex;
  flex-direction:column;
}
label {
  font-size:12px;
}
</style>
</head>
<body>

<h2>관리자 패널</h2>

<div id="controls">
  <label>팀 인원 수
    <input type="number" id="teamCount" value="5" min="1" max="33">
  </label>
  <button id="genBtn">입력칸 생성</button>
  <button id="applyBtn">적용</button>
</div>

<div id="playerInputs">
  <div class="team-column" id="ourTeam"><h3>우리팀</h3></div>
  <div class="team-column" id="oppTeam"><h3>상대팀</h3></div>
</div>

<!-- Supabase CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const SUPABASE_URL = 'YOUR_PROJECT_URL';
const SUPABASE_KEY = 'YOUR_ANON_PUBLIC_KEY';

const supabaseClient = supabase.createClient(
  SUPABASE_URL,
  SUPABASE_KEY
);

function generateInputs() {
  const count = Number(document.getElementById('teamCount').value);
  const our = document.getElementById('ourTeam');
  const opp = document.getElementById('oppTeam');

  our.innerHTML = '<h3>우리팀</h3>';
  opp.innerHTML = '<h3>상대팀</h3>';

  for (let i = 1; i <= count; i++) {
    our.insertAdjacentHTML('beforeend', `
      <div class="player-input">
        <label>우리팀 ${i}</label>
        <input id="our-${i}">
      </div>
    `);

    opp.insertAdjacentHTML('beforeend', `
      <div class="player-input">
        <label>상대팀 ${i}</label>
        <input id="opp-${i}">
      </div>
    `);
  }
}

async function applySettings() {
  const count = Number(document.getElementById('teamCount').value);
  const players = [];

  for (let i = 1; i <= count; i++) {
    const o = document.getElementById(`our-${i}`)?.value.trim();
    const p = document.getElementById(`opp-${i}`)?.value.trim();
    if (o) players.push({ name:o, team:'우리팀', wins:0, losses:0, streak:0 });
    if (p) players.push({ name:p, team:'상대팀', wins:0, losses:0, streak:0 });
  }

  if (!players.length) {
    alert('플레이어 이름을 입력하세요');
    return;
  }

  await supabaseClient.from('players').delete().neq('id',0);
  const { error } = await supabaseClient.from('players').insert(players);

  if (error) {
    console.error(error);
    alert('DB 저장 실패');
  } else {
    alert('적용 완료!');
  }
}

// 버튼 연결
document.getElementById('genBtn').onclick = generateInputs;
document.getElementById('applyBtn').onclick = applySettings;

// 최초 1회
generateInputs();
</script>

</body>
</html>












