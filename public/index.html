<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì†”ë­ ë‚´ê¸° ì†¡ì¶œ íŒ¨ë„</title>

<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">

<style>
:root {
  --bg:#050505;
  --panel:#0e0e0e;
  --gold:#ffd369;
  --gold-glow:#fff2b0;
  --red:#ff5c5c;
  --red-glow:#ff9a9a;
  --blue:#4db8ff;
}

body {
  margin:0;
  background:radial-gradient(circle at top,#1a1a1a,#050505);
  color:#fff;
  font-family:'Pretendard', sans-serif;
}

.container {
  display:flex;
  height:100vh;
}

.team {
  flex:1;
  padding:30px;
  background:linear-gradient(180deg,#141414,#060606);
}

.team.red { border-right:2px solid #222; }

.team h1 {
  text-align:center;
  font-size:44px;
  margin:0;
  letter-spacing:2px;
}

.red h1 {
  color:var(--red);
  text-shadow:0 0 20px rgba(255,90,90,.9);
}
.blue h1 {
  color:var(--blue);
  text-shadow:0 0 20px rgba(90,160,255,.9);
}

/* ìš”ì•½ */
.summary {
  margin:16px 0 22px;
  text-align:center;
  font-size:24px;
  font-weight:700;
}

.sparkle {
  animation:sparkle 1.6s infinite;
}

@keyframes sparkle {
  0% { text-shadow:0 0 6px currentColor; }
  50% { text-shadow:0 0 22px currentColor; }
  100% { text-shadow:0 0 6px currentColor; }
}

/* ì—°ìŠ¹ */
.streak {
  margin-top:6px;
  font-size:26px;
}

.streak-win {
  color:#00ff99;
  animation:pulse 1s infinite;
}

.streak-lose {
  color:#ff6666;
  opacity:.85;
}

@keyframes pulse {
  0% { text-shadow:0 0 6px #00ff99; }
  50% { text-shadow:0 0 26px #00ff99; }
  100% { text-shadow:0 0 6px #00ff99; }
}

/* í…Œì´ë¸” */
table {
  width:100%;
  border-collapse:collapse;
  font-size:22px;
}

th {
  padding:12px 0;
  border-bottom:2px solid #333;
  color:#ddd;
}

td {
  padding:12px 0;
  text-align:center;
}

.nickname {
  font-weight:600;
  color:#ffffff;
}

.streamer {
  color:#9effff;
  font-weight:700;
  animation:sparkle 2s infinite;
}

/* ìŠ¹ / íŒ¨ */
.win {
  font-family:'Orbitron', sans-serif;
  color:var(--gold);
  text-shadow:0 0 14px var(--gold-glow);
}

.lose {
  font-family:'Orbitron', sans-serif;
  color:var(--red);
  text-shadow:0 0 14px var(--red-glow);
}
</style>
</head>

<body>
<div class="container">

  <div class="team red">
    <h1 id="redName">RED TEAM</h1>
    <div class="summary" id="redSummary"></div>
    <table>
      <thead>
        <tr>
          <th>ìŠ¤íŠ¸ë¦¬ë¨¸</th>
          <th>ìŠ¹ë¦¬</th>
          <th>íŒ¨ë°°</th>
        </tr>
      </thead>
      <tbody id="redPlayers"></tbody>
    </table>
  </div>

  <div class="team blue">
    <h1 id="blueName">BLUE TEAM</h1>
    <div class="summary" id="blueSummary"></div>
    <table>
      <thead>
        <tr>
          <th>ìŠ¤íŠ¸ë¦¬ë¨¸</th>
          <th>ìŠ¹ë¦¬</th>
          <th>íŒ¨ë°°</th>
        </tr>
      </thead>
      <tbody id="bluePlayers"></tbody>
    </table>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://hsvknfmnsehwytnvaiwr.supabase.co";
const SUPABASE_KEY = "sb_publishable_l2wj1IeGSfcxgKVjJ28n0w_WK9iHm-j";

const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function render() {
  const { data: players } = await sb.from('players').select('*');
  const { data: setting } = await sb.from('settings').select('*').single();

  document.getElementById('redName').textContent = setting.red_team_name;
  document.getElementById('blueName').textContent = setting.blue_team_name;

  renderTeam(players.filter(p=>p.team==='red'),'redPlayers','redSummary');
  renderTeam(players.filter(p=>p.team==='blue'),'bluePlayers','blueSummary');
}

function renderTeam(list, bodyId, summaryId) {
  const body = document.getElementById(bodyId);
  body.innerHTML='';

  let win=0, lose=0, streak=0;

  list.forEach(p=>{
    win+=p.wins;
    lose+=p.losses;
    streak+=p.streak;

    body.insertAdjacentHTML('beforeend',`
      <tr>
        <td class="${p.is_streamer ? 'streamer' : 'nickname'}">
          ${p.name}
        </td>
        <td class="win sparkle">${p.wins}</td>
        <td class="lose sparkle">${p.losses}</td>
      </tr>
    `);
  });

  document.getElementById(summaryId).innerHTML = `
    <span class="win sparkle">${win} ìŠ¹ë¦¬</span> Â· 
    <span class="lose sparkle">${lose} íŒ¨ë°°</span>
    <div class="streak ${streak>0?'streak-win':streak<0?'streak-lose':''}">
      ${streak>0 ? `ğŸ”¥ ${streak}ì—°ìŠ¹` : streak<0 ? `ğŸ’€ ${Math.abs(streak)}ì—°íŒ¨` : ''}
    </div>
  `;
}

render();

/* ì‹¤ì‹œê°„ ë°˜ì˜ */
sb.channel('live')
  .on('postgres_changes',{event:'*',schema:'public',table:'players'},render)
  .on('postgres_changes',{event:'*',schema:'public',table:'settings'},render)
  .subscribe();
</script>
</body>
</html>



















