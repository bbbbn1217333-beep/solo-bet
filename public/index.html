<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ÏÜîÎû≠ ÎÇ¥Í∏∞ ÏÜ°Ï∂ú</title>

<!-- Ïù∏Í∏∞ Ìè∞Ìä∏ -->
<link href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@600;700&display=swap" rel="stylesheet">

<style>
body {
  margin:0;
  background:
    radial-gradient(circle at top, #1c1c1c, #070707 70%);
  color:#fff;
  font-family:'Pretendard', sans-serif;
  overflow:hidden;
}

.container {
  display:flex;
  height:100vh;
}

/* ===== ÌåÄ ÏòÅÏó≠ ===== */
.team {
  flex:1;
  padding:28px 26px;
}

.red {
  background:linear-gradient(180deg,#3b0000 0%,#140000 45%,#070707 100%);
}
.blue {
  background:linear-gradient(180deg,#001f3d 0%,#001224 45%,#070707 100%);
}

/* ===== ÌåÄÎ™Ö ===== */
.team h1 {
  text-align:center;
  font-size:42px;
  margin:0 0 14px 0;
  letter-spacing:1.5px;
  font-weight:800;
}

.red h1 {
  color:#ff6666;
  text-shadow:0 0 22px rgba(255,100,100,0.9);
}
.blue h1 {
  color:#66b3ff;
  text-shadow:0 0 22px rgba(100,170,255,0.9);
}

/* ===== ÏöîÏïΩ ===== */
.summary {
  text-align:center;
  font-size:22px;
  font-weight:700;
  padding:12px 0 16px;
  margin-bottom:18px;
  border-radius:14px;
  background:rgba(0,0,0,0.4);
  line-height:1.45;
  font-family:'JetBrains Mono', monospace;
}

/* ===== Ïó∞Ïäπ / Ïó∞Ìå® ===== */
.streak-win {
  animation: winBurst 1.15s infinite;
  color:#ffd86b;
}

@keyframes winBurst {
  0% {
    text-shadow:0 0 10px rgba(255,216,107,0.6);
    transform:scale(1);
  }
  50% {
    text-shadow:
      0 0 25px rgba(255,216,107,0.9),
      0 0 60px rgba(255,200,80,0.8);
    transform:scale(1.12);
  }
  100% {
    text-shadow:0 0 10px rgba(255,216,107,0.6);
    transform:scale(1);
  }
}

.streak-lose {
  animation: losePulse 0.4s infinite;
  color:#d2b48c;
  opacity:0.85;
}

@keyframes losePulse {
  0% { transform:translateX(0); }
  25% { transform:translateX(-2px); }
  50% { transform:translateX(2px); }
  75% { transform:translateX(-2px); }
  100% { transform:translateX(0); }
}

/* ===== ÌÖåÏù¥Î∏î ===== */
table {
  width:100%;
  border-collapse:collapse;
  font-size:18px;
}

th {
  padding:10px;
  border-bottom:2px solid rgba(255,255,255,0.18);
  color:#bdbdbd;
  font-weight:600;
}

td {
  padding:10px 6px;
  text-align:center;
}

/* ===== ÎãâÎÑ§ÏûÑ ===== */
.nickname {
  font-size:19px;
  font-weight:600;
  color:#e6e6e6;
  text-shadow:0 0 6px rgba(255,255,255,0.15);
}

/* ===== Ïäπ / Ìå® ===== */
.win {
  font-family:'JetBrains Mono', monospace;
  color:#ffd86b;
  font-weight:800;
  text-shadow:
    0 0 10px rgba(255,216,107,0.8),
    0 0 25px rgba(255,200,80,0.6);
}

.lose {
  font-family:'JetBrains Mono', monospace;
  color:#d2b48c;
  font-weight:800;
  text-shadow:
    0 0 8px rgba(210,180,140,0.6);
}

tr:nth-child(even) {
  background:rgba(255,255,255,0.035);
}
</style>
</head>

<body>

<div class="container">

  <!-- RED TEAM -->
  <div class="team red">
    <h1 id="redName">RED TEAM</h1>
    <div class="summary" id="redSummary"></div>

    <table>
      <thead>
        <tr>
          <th>PLAYER</th>
          <th>WIN</th>
          <th>LOSE</th>
        </tr>
      </thead>
      <tbody id="redPlayers"></tbody>
    </table>
  </div>

  <!-- BLUE TEAM -->
  <div class="team blue">
    <h1 id="blueName">BLUE TEAM</h1>
    <div class="summary" id="blueSummary"></div>

    <table>
      <thead>
        <tr>
          <th>PLAYER</th>
          <th>WIN</th>
          <th>LOSE</th>
        </tr>
      </thead>
      <tbody id="bluePlayers"></tbody>
    </table>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://hsvknfmnsehwytnvaiwr.supabase.co";
const SUPABASE_KEY = "sb_publishable_l2wj1IeGSfcxgKVjJ28n0w_WK9iHm-j";
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const redName = document.getElementById('redName');
const blueName = document.getElementById('blueName');

async function loadSettings() {
  const { data } = await sb.from('settings').select('*').single();
  if (!data) return;
  redName.textContent = data.red_team_name;
  blueName.textContent = data.blue_team_name;
}

async function loadPlayers() {
  const { data: players } = await sb.from('players').select('*').order('id');
  if (!players) return;

  renderTeam(players.filter(p=>p.team==='red'),'redPlayers','redSummary');
  renderTeam(players.filter(p=>p.team==='blue'),'bluePlayers','blueSummary');
}

function renderTeam(list, bodyId, summaryId) {
  const body = document.getElementById(bodyId);
  const summary = document.getElementById(summaryId);
  body.innerHTML = '';

  let w=0,l=0,s=0;

  list.forEach(p=>{
    w+=p.wins;
    l+=p.losses;
    s+=p.streak;

    body.insertAdjacentHTML('beforeend',`
      <tr>
        <td class="nickname">${p.name}</td>
        <td class="win">${p.wins}</td>
        <td class="lose">${p.losses}</td>
      </tr>
    `);
  });

  summary.className='summary';
  let streakText='';

  if (s>0) {
    summary.classList.add('streak-win');
    streakText=`üî• ${s} WIN STREAK`;
  } else if (s<0) {
    summary.classList.add('streak-lose');
    streakText=`üíÄ ${Math.abs(s)} LOSE STREAK`;
  }

  summary.innerHTML=`${w}W ${l}L<br>${streakText}`;
}

loadSettings();
loadPlayers();

sb.channel('realtime')
  .on('postgres_changes',{event:'*',schema:'public',table:'settings'},loadSettings)
  .on('postgres_changes',{event:'*',schema:'public',table:'players'},loadPlayers)
  .subscribe();
</script>

</body>
</html>

















