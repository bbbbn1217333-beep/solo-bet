<h1>5 VS 5 솔랭 내기</h1>
<div id="screen"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
const supabaseUrl = 'https://hsvknfmnsehwytnvaiwr.supabase.co';
const supabaseKey = 'sb_publishable_l2wj1IeGSfcxgKVjJ28n0w_WK9iHm-j';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

// 화면 갱신 함수
function updateScreen(players){
  const screenDiv = document.getElementById('screen');
  screenDiv.innerHTML = '';
  players.forEach(p => {
    const div = document.createElement('div');
    div.innerText = `${p.name} (${p.team}) - ${p.wins}승 ${p.losses}패 ${p.streak}연승`;
    screenDiv.appendChild(div);
  });
}

// 초기 데이터 가져오기
async function loadPlayers(){
  let { data: players, error } = await supabase.from('players').select('*');
  if(error) console.log(error);
  else updateScreen(players);
}

// 실시간 구독
supabase
  .from('players')
  .on('*', payload => {
    console.log('데이터 변경:', payload.new);
    loadPlayers(); // 변경 발생하면 화면 업데이트
  })
  .subscribe();

loadPlayers(); // 초기 로드
</script>







